---
title: 'Live FigJam Clone with Liveblocks'
publishedAt: '2024-06-01'
summary: 'Recreating Figma-style multiplayer whiteboarding with Next.js, Liveblocks, and Fabric.js.'
category: 'Open Source'
githubURL: 'https://github.com/salahbm/figma_clone'
image: '/medias/mdx-content/figpro-whiteboard.webp'
---

# FigPro ‚Äì Multiplayer Canvas for the Web

FigPro is a Figma-inspired whiteboard built with Next.js 14, Liveblocks, and Fabric.js. We wanted to explore how close we could get to FigJam‚Äôs collaborative energy while keeping the architecture approachable for any React developer.

## Why this project / motivation

Designers and product teams love collaborative canvases, but implementing cursor chat, emoji bursts, and shared drawing tools from scratch can feel overwhelming. This project is an experiment in demystifying that stack: how little code do we need to ship a real-time playground that feels fun, fast, and familiar?

## What it does / overview

- Real-time canvas editing with rectangles, circles, triangles, lines, free drawing, text, and image uploads.
- Multiplayer presence: live cursors, cursor chat, emoji reactions, and an active user list that updates as teammates join.
- Comment threads anchored to positions on the canvas, complete with reactions and resolved state.
- State persistence via Liveblocks storage so everyone sees the same canvas and undo/redo history, even after reconnecting.

<Callout icon='üí°'>
  Because we lean on Liveblocks for presence, history, and comments, we get
  optimistic updates and reconciliation &ldquo;for free&rdquo; without building
  a socket server.
</Callout>

## How it works (architecture, APIs, or hooks)

- **Next.js app router** hosts the experience and disables SSR for the canvas screen with so Fabric.js can safely touch the DOM on mount.
- **Liveblocks room context** wires together presence, reactions, and shared storage. We shape a <InlineCode>LiveMap</InlineCode> of <InlineCode>canvasObjects</InlineCode> that mirrors Fabric objects across clients, while the generated hooks expose <InlineCode>useStorage</InlineCode>, <InlineCode>useMutation</InlineCode>, <InlineCode>useUndo</InlineCode>, and more.
- **Fabric.js renderer** is responsible for drawing, selecting, scaling, and zooming shapes. Event handlers translate mouse gestures into Fabric objects and immediately sync them via Liveblocks mutations.
- **Presence-driven UI** (cursor chat, reactions, and shortcuts) is handled in <InlineCode>components/Live.tsx</InlineCode>, which broadcasts transient events over Liveblocks while debouncing reaction trails and keyboard shortcuts.

## Code snippets (use <InlineCode> for small code and fenced tsx or ts for examples</InlineCode>)

### Sharing Fabric state over Liveblocks

```tsx
const syncShapeInStorage = useMutation(({ storage }, object) => {
  if (!object) return
  const { objectId } = object
  const shapeData = object.toJSON()
  shapeData.objectId = objectId
  const canvasObjects = storage.get('canvasObjects')
  canvasObjects.set(objectId, shapeData)
}, [])
```

Every Fabric object is serialized, tagged with a stable <InlineCode>objectId</InlineCode>, and written into the shared <InlineCode>LiveMap</InlineCode>. When any client mutates the map, the <InlineCode>useStorage</InlineCode> subscription re-renders the canvas so everyone stays in lockstep.„ÄêF:app/App.tsx‚Ä†L118-L153„Äë

### Multiplayer cursors, chats, and emoji bursts

```tsx
const [{ cursor }, updateMyPresence] = useMyPresence()
const broadcast = useBroadcastEvent()

useInterval(() => {
  if (
    cursorState.mode === CursorMode.Reaction &&
    cursorState.isPressed &&
    cursor
  ) {
    setReactions((reactions) =>
      reactions.concat([
        { point: cursor, value: cursorState.reaction, timestamp: Date.now() },
      ])
    )
    broadcast({ x: cursor.x, y: cursor.y, value: cursorState.reaction })
  }
}, 100)
```

The Live canvas listens for keyboard shortcuts like <InlineCode>/</InlineCode> and <InlineCode>e</InlineCode> to toggle chat and reactions, then uses Liveblocks presence and event streams to animate cursors and emoji trails across all participants.„ÄêF:components/Live.tsx‚Ä†L25-L105„Äë

## Demo / Media if applicable (use `<RoundedVideo>` or `<Image>` components)

<RoundedVideo
  src='/medias/mdx-content/figpro-whiteboard-demo.mp4'
  caption='Collaborating inside FigPro with reactions, chat, and live drawing.'
/>

## Conclusion (reflective summary of developer benefits or learnings)

FigPro shows how approachable multiplayer canvases can be when we combine Next.js, Liveblocks, and Fabric.js. The stack balances a declarative React UI with an imperative drawing engine, while Liveblocks handles synchronization, history, and comments. Feel free to fork the <a href="https://github.com/salahbm/figma_clone">repo on GitHub</a> and remix the tools, shortcuts, or canvas behaviors to fit your own product experiments.
